# Практикум 11

## Какво разгледахме предния път?

- указатели

## Какво ще научим днес?

- динамична памет

## Динамична памет

**Stack**

- паметта се заделя ПРЕДИ да се компилира програмата.
- паметта се освобождава/трие/маркира като свободна автоматично - при излизането от scope-а, в който е дефинирана.

Искаме памет по време на изпълнението на програмта?

**Heap**

- Масиви и обекти без предварително да е известна големината.

Оператор **new**

- Връща указтел към началото на паметта

```c++
new int[n];  n НЕ е задължително да е константа!
```

Заделянето на динамична памет е много "бавна" операция!!

Динамична памет НЕ се трие автоматично.

Оператор delete[] - освобождава/маркира като свободна динамична памет!

```c++
void f()
{
  int x = 40;
  char ch[2] = {'a', 'b'};
  int* ptr = new int[3];
}
```

![enter image description here](https://i.ibb.co/vYdR6Zj/dyn-mem.png)

След приключването на функцията ще се изчисти паметта в стека, но НЕ и паметта в heap-а.

За това ние трябва ръчно да я маркираме като свободна.

```c++
void f()
{
  int x = 40;
  char ch[2] = {'a', 'b'};
  int* ptr = new int[3];
  delete[] ptr; //!!!
}
```
